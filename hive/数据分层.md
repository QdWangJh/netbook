### 不同层级概念

#### ODS

ODS是Operation Data Store的缩写。它存放未经过处理的原始数据到数据仓库系统中，结构上与源系统保持一致，是数据仓库的数据准备区。

| 数据来源 | 业务系统ODS是Operation Data  Store的缩写。它存放未经过处理的原始数据到数据仓库系统中，结构上与源系统保持一致，是数据仓库的数据准备区。 |
| -------- | ------------------------------------------------------------ |
| 建模方式 | 与业务系统数据模型保持一致，分区存储，按照业务主题进行逻辑划分 |
| 存储方式 | 采用txt文本方式存储（avro），一站制造项目保留时间为3个月。通过分区方式进行周期存储 |
| 应用领域 | 为其他层提供数据                                             |
| ETL过程  | 通过sqoop从oracle原始系统增量抽取并落地成文本文件，再通过Hive装载到数据仓库的ODS层，不做清洗转换 |

#### DWD

DWD层是Data warehouse detail的缩写。DWD层是业务层和数据仓库的隔离层，存放的是明细事实数据，为了支持数据重跑可以额外增加数据业务日期字段，可按年月日进行分区，用增量ODS层数据和前一天DWD相关表进行合并处理。

| 数据来源 | ODS层                                                        |
| -------- | ------------------------------------------------------------ |
| 建模方式 | 与ods层一致                                                  |
| 存储方式 | 采用orc方式存储，保持全量的所有数据                          |
| 应用领域 | DWD层的数据为DW层提供各个主体业务明细数据                    |
| ETL过程  | 根据ODS层的增量数据，通过HQL进行合并生成全量数据，它不做清洗转换，保留原始全量数据。所有历史数据都保存在DWD层。 |



#### DWS

  DWS是Data warehouse service的缩写。它用于建立一致的数据分析维表、构建命名规范、口径一致的统计指标，为上层提供公共指标。它基于DWD层的基础数据，整合汇总层分析某一个主题域的服务数据，一般是宽表。DWS中按照业务、主题划分，例如流量，订单，用户等，生成字段比较多的宽表，用于后续的业务查询。

| 数据来源 | DWD层                                                        |
| -------- | ------------------------------------------------------------ |
| 建模方式 | 维度建模，星型模型                                           |
| 存储方式 | 采用orc方式存储，保持全量的所有数据                          |
| 应用领域 | 为DM层、ST层提供数据，为EDW(企业级数据仓库)提供各种统计汇总数据 |
| ETL过程  | 在这一层可以创建维度表，通过代理键建立与事实表的关联。并按各个维度进行汇总统计 |

#### DWB

  DWB是Data warehouse base的缩写，它是一个基础数据层，存储的是客观事实数据。一般用作中间层。在实际计算中，在DWB层先计算出多个小的中间表，再拼接成一张DWS的大宽表。

| 数据来源 | DWD层                                                        |
| -------- | ------------------------------------------------------------ |
| 建模方式 | 维度建模，星型模型                                           |
| 存储方式 | 采用orc方式存储，保持全量的所有数据                          |
| 应用领域 | 中间层，根据dwd层，里面包含了大量业务指标                    |
| ETL过程  | 从DWD层进行轻度清洗、转换、汇总聚合生成DWB层数据，例如：将字符合并、地址转换、日期转换、合并等。 |

#### DM

DM层也即数据集市层。数据集市层是面向主题的数据组织， 按照业务线、或者部门划分。数据来自于DW层。

| 数据来源 | DWS层                                                     |
| -------- | --------------------------------------------------------- |
| 建模方式 | 维度建模，星型模型                                        |
| 存储方式 | 采用orc方式存储，保持全量的所有数据                       |
| 应用领域 | 用于数据挖掘，自定义查询，应用集市                        |
| ETL过程  | 从DWD将数据进行清洗、转换，为不同的业务部门提数做好准备。 |

ST(APP)

与DM层一样，ST层的数据来自于DW层和ST层。这一层的数据是给最终需要查看报表用户使用的。ST层是经过聚合汇总统计后的粗粒度事实表。

| 数据来源 | DW层                                                         |
| -------- | ------------------------------------------------------------ |
| 建模方式 | 维度建模，星型模型                                           |
| 存储方式 | 采用orc方式存储，保持全量的所有数据。                        |
| 应用领域 | 面向的是用户应用和分析需求，例如：前端报表、看板、KPI、或者业务分析专题等。 |
| ETL过程  | 从DWS层的数据进行粗粒度聚合汇总，例如：按年、季、月、天对一些维度进行聚合，生成业务需要的事实数据。 |

